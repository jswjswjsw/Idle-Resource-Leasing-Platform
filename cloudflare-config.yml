# ==============================================
# wwwcn.uk åŸŸå Cloudflare éƒ¨ç½²é…ç½®
# ==============================================

# ğŸŒ åŸŸåä¿¡æ¯
ä¸»åŸŸå: wwwcn.uk
å‰ç«¯åœ°å€: https://wwwcn.uk
APIåœ°å€: https://api.wwwcn.uk
ç®¡ç†åå°: https://admin.wwwcn.uk (å¯é€‰)

# ğŸ“¡ Cloudflare DNS è§£æé…ç½®
dns_records:
  # ä¸»åŸŸåè§£æåˆ°æœåŠ¡å™¨
  - type: A
    name: "@"  # ä»£è¡¨ wwwcn.uk
    content: "YOUR_SERVER_IP"
    proxied: true  # å¯ç”¨ Cloudflare ä»£ç†
    
  # API å­åŸŸå
  - type: A
    name: "api"  # api.wwwcn.uk
    content: "YOUR_SERVER_IP" 
    proxied: true
    
  # WWW åˆ«å
  - type: CNAME
    name: "www"  # www.wwwcn.uk
    content: "wwwcn.uk"
    proxied: true
    
  # ç®¡ç†åå° (å¯é€‰)
  - type: A
    name: "admin"  # admin.wwwcn.uk
    content: "YOUR_SERVER_IP"
    proxied: true

# ğŸ”’ Cloudflare SSL/TLS é…ç½®
ssl_config:
  ssl_mode: "Full (strict)"  # æœ€å®‰å…¨æ¨¡å¼
  auto_https_rewrites: true   # è‡ªåŠ¨ HTTPS é‡å®šå‘
  hsts: 
    enabled: true
    max_age: 31536000  # 1å¹´
    include_subdomains: true
  min_tls_version: "1.2"

# âš¡ Cloudflare æ€§èƒ½ä¼˜åŒ–
performance_config:
  # ç¼“å­˜é…ç½®
  caching:
    browser_cache_ttl: 14400  # 4å°æ—¶
    cache_level: "Standard"
    
  # å‹ç¼©
  compression:
    brotli: true
    gzip: true
    
  # Minify
  minify:
    css: true
    html: true
    js: true
    
  # è‡ªåŠ¨ä¼˜åŒ–
  auto_minify: true
  rocket_loader: false  # é¿å…ä¸Reactå†²çª
  
# ğŸ‡¨ğŸ‡³ ä¸­å›½è®¿é—®ä¼˜åŒ–
china_optimization:
  # Cloudflare ä¸­å›½ç½‘ç»œ
  china_network: true  # Cloudflare åœ¨ä¸­å›½æœ‰åˆä½œèŠ‚ç‚¹
  
  # åŸŸåä¼˜åŠ¿
  uk_domain_benefits:
    - "æ— éœ€ICPå¤‡æ¡ˆ"
    - "ä¸­å›½ç”¨æˆ·å¯æ­£å¸¸è®¿é—®"  
    - "é€šè¿‡é¦™æ¸¯/æ–°åŠ å¡èŠ‚ç‚¹è·¯ç”±"
    - "å»¶è¿Ÿé€šå¸¸åœ¨ 100-200ms"
    
  # æ¨èé…ç½®
  recommended_settings:
    argo_smart_routing: false  # å…è´¹ç‰ˆä¸æ”¯æŒ
    polish: false  # å›¾ç‰‡ä¼˜åŒ–ï¼ˆä»˜è´¹åŠŸèƒ½ï¼‰
    mirage: false  # å›¾ç‰‡å»¶è¿ŸåŠ è½½ï¼ˆä»˜è´¹åŠŸèƒ½ï¼‰

# ğŸ›¡ï¸ å®‰å…¨é…ç½®
security_config:
  # é˜²ç«å¢™è§„åˆ™
  firewall_rules:
    - name: "é˜»æ­¢æ¶æ„çˆ¬è™«"
      expression: '(cf.client.bot) and not (cf.verified_bot_category in {"search_engine" "social_media"})'
      action: "block"
      
    - name: "APIé™æµ"
      expression: '(http.request.uri.path contains "/api/") and (rate(10m) > 100)'
      action: "challenge"
      
  # DDoS é˜²æŠ¤
  ddos_protection: 
    enabled: true
    sensitivity: "High"
    
  # Web åº”ç”¨é˜²ç«å¢™
  waf:
    enabled: true
    managed_rules: true
    
# ğŸ“Š ç›‘æ§å’Œåˆ†æ
monitoring:
  # Cloudflare Analytics
  analytics: true
  
  # ç½‘ç«™ç›‘æ§
  health_checks:
    - url: "https://wwwcn.uk/api/health"
      interval: 60  # ç§’
      
    - url: "https://api.wwwcn.uk/api/health"  
      interval: 60

# ğŸŒ åœ°ç†ä½ç½®é…ç½®
geo_config:
  # å…è®¸çš„å›½å®¶/åœ°åŒº
  allowed_countries: 
    - "CN"  # ä¸­å›½
    - "HK"  # é¦™æ¸¯
    - "TW"  # å°æ¹¾
    - "SG"  # æ–°åŠ å¡
    - "JP"  # æ—¥æœ¬
    - "KR"  # éŸ©å›½
    - "US"  # ç¾å›½
    - "GB"  # è‹±å›½
    - "ALL" # å…¨çƒè®¿é—®
    
  # é‡å®šå‘è§„åˆ™ï¼ˆå¯é€‰ï¼‰
  redirects:
    # å¼ºåˆ¶ HTTPS
    - source: "http://wwwcn.uk/*"
      target: "https://wwwcn.uk/$1"
      status: 301
      
    # WWW é‡å®šå‘
    - source: "https://www.wwwcn.uk/*"
      target: "https://wwwcn.uk/$1" 
      status: 301

# ğŸ“± ç§»åŠ¨ç«¯ä¼˜åŒ–
mobile_optimization:
  amp: false  # æš‚ä¸å¯ç”¨ AMP
  mobile_redirect: false
  tablet_redirect: false

# ğŸ”§ å¼€å‘ç¯å¢ƒé…ç½®
development:
  # å¼€å‘å­åŸŸå
  dev_subdomain: "dev.wwwcn.uk"  # å¼€å‘ç¯å¢ƒ
  staging_subdomain: "staging.wwwcn.uk"  # æµ‹è¯•ç¯å¢ƒ
  
  # å¼€å‘è€…æ¨¡å¼
  development_mode: false  # ä»…åœ¨éœ€è¦æ—¶å¯ç”¨