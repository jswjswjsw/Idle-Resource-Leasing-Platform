{"ast":null,"code":"import React,{useState,useRef,useEffect}from'react';import{motion,AnimatePresence}from'framer-motion';import{Send,Paperclip,Image,MapPin,Phone,Video,X,MoreVertical,AlertCircle}from'lucide-react';import{useChat}from'../hooks/useChat';import{useAuth}from'../hooks/useAuth';import{cn}from'../utils/cn';import{formatDistanceToNow}from'date-fns';import{zhCN}from'date-fns/locale';/**\n * 聊天窗口组件\n * 提供实时聊天功能，包括消息发送、接收、文件分享等\n */import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ChatWindow=_ref=>{let{orderId,receiverInfo,onClose,className}=_ref;const[message,setMessage]=useState('');const[isTyping,setIsTyping]=useState(false);const messagesEndRef=useRef(null);const fileInputRef=useRef(null);const{user}=useAuth();const{messages,sendMessage,isLoading,error,setCurrentChat}=useChat();// 设置当前聊天\nuseEffect(()=>{setCurrentChat({orderId,userId:receiverInfo.id,userName:receiverInfo.name});return()=>{setCurrentChat(null);};},[orderId,receiverInfo.id,receiverInfo.name,setCurrentChat]);// 自动滚动到底部\nuseEffect(()=>{var _messagesEndRef$curre;(_messagesEndRef$curre=messagesEndRef.current)===null||_messagesEndRef$curre===void 0?void 0:_messagesEndRef$curre.scrollIntoView({behavior:'smooth'});},[messages]);// 处理发送消息\nconst handleSendMessage=async()=>{if(!message.trim()||isLoading)return;try{await sendMessage(message.trim());setMessage('');}catch(error){console.error('发送消息失败:',error);}};// 处理文件上传\nconst handleFileUpload=async file=>{// 这里可以集成文件上传功能\nconsole.log('上传文件:',file.name);// 实际实现会调用fileService.uploadFile()\n};// 处理键盘事件\nconst handleKeyPress=e=>{if(e.key==='Enter'&&!e.shiftKey){e.preventDefault();handleSendMessage();}};// 格式化消息时间\nconst formatMessageTime=date=>{return formatDistanceToNow(new Date(date),{addSuffix:true,locale:zhCN});};// 判断消息是否来自当前用户\nconst isCurrentUser=senderId=>{return senderId===(user===null||user===void 0?void 0:user.id);};// 渲染消息内容\nconst renderMessageContent=message=>{switch(message.type){case'text':return/*#__PURE__*/_jsx(\"div\",{className:\"whitespace-pre-wrap break-words\",children:message.message});case'image':return/*#__PURE__*/_jsx(\"img\",{src:message.message,alt:\"\\u5206\\u4EAB\\u7684\\u56FE\\u7247\",className:\"max-w-xs rounded-lg cursor-pointer hover:opacity-90\",onClick:()=>window.open(message.message,'_blank')});case'location':return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 p-2 bg-blue-50 rounded-lg\",children:[/*#__PURE__*/_jsx(MapPin,{className:\"w-4 h-4 text-blue-600\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-blue-800\",children:message.message})]});default:return/*#__PURE__*/_jsx(\"div\",{className:\"whitespace-pre-wrap break-words\",children:message.message});}};return/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:cn(\"bg-white rounded-lg shadow-xl flex flex-col h-full\",className),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-4 border-b border-neutral-200\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"img\",{src:receiverInfo.avatar,alt:receiverInfo.name,className:\"w-10 h-10 rounded-full object-cover\"}),receiverInfo.online&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-white\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-gray-900\",children:receiverInfo.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:receiverInfo.online?'在线':'离线'})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"p-2 hover:bg-neutral-100 rounded-full transition-colors\",children:/*#__PURE__*/_jsx(Phone,{className:\"w-5 h-5 text-gray-600\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"p-2 hover:bg-neutral-100 rounded-full transition-colors\",children:/*#__PURE__*/_jsx(Video,{className:\"w-5 h-5 text-gray-600\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"p-2 hover:bg-neutral-100 rounded-full transition-colors\",children:/*#__PURE__*/_jsx(MoreVertical,{className:\"w-5 h-5 text-gray-600\"})}),onClose&&/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"p-2 hover:bg-neutral-100 rounded-full transition-colors\",children:/*#__PURE__*/_jsx(X,{className:\"w-5 h-5 text-gray-600\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 overflow-y-auto p-4 space-y-4\",children:[error&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 p-3 bg-red-50 text-red-600 rounded-lg\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm\",children:\"\\u52A0\\u8F7D\\u6D88\\u606F\\u5931\\u8D25\\uFF0C\\u8BF7\\u91CD\\u8BD5\"})]}),/*#__PURE__*/_jsx(AnimatePresence,{children:messages.map(message=>/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:cn(\"flex gap-3\",isCurrentUser(message.senderId)?\"justify-end\":\"justify-start\"),children:[!isCurrentUser(message.senderId)&&/*#__PURE__*/_jsx(\"img\",{src:receiverInfo.avatar,alt:receiverInfo.name,className:\"w-8 h-8 rounded-full object-cover flex-shrink-0\"}),/*#__PURE__*/_jsxs(\"div\",{className:cn(\"max-w-xs lg:max-w-md\",isCurrentUser(message.senderId)?\"order-first\":\"order-last\"),children:[/*#__PURE__*/_jsx(\"div\",{className:cn(\"rounded-lg px-4 py-2\",isCurrentUser(message.senderId)?\"bg-primary-500 text-white\":\"bg-neutral-100 text-gray-900\"),children:renderMessageContent(message)}),/*#__PURE__*/_jsxs(\"div\",{className:cn(\"text-xs text-gray-500 mt-1\",isCurrentUser(message.senderId)?\"text-right\":\"text-left\"),children:[formatMessageTime(message.createdAt),!message.read&&isCurrentUser(message.senderId)&&/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 text-primary-600\",children:\"\\u5DF2\\u9001\\u8FBE\"})]})]}),isCurrentUser(message.senderId)&&/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 flex-shrink-0\"})]},message.id))}),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 border-t border-neutral-200\",children:[isTyping&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-500 mb-2\",children:[receiverInfo.name,\" \\u6B63\\u5728\\u8F93\\u5165...\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"input\",{ref:fileInputRef,type:\"file\",accept:\"image/*\",className:\"hidden\",onChange:e=>{var _e$target$files;const file=(_e$target$files=e.target.files)===null||_e$target$files===void 0?void 0:_e$target$files[0];if(file){handleFileUpload(file);}}}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{var _fileInputRef$current;return(_fileInputRef$current=fileInputRef.current)===null||_fileInputRef$current===void 0?void 0:_fileInputRef$current.click();},className:\"p-2 hover:bg-neutral-100 rounded-full transition-colors\",title:\"\\u53D1\\u9001\\u56FE\\u7247\",children:/*#__PURE__*/_jsx(Image,{className:\"w-5 h-5 text-gray-600\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"p-2 hover:bg-neutral-100 rounded-full transition-colors\",title:\"\\u53D1\\u9001\\u4F4D\\u7F6E\",children:/*#__PURE__*/_jsx(MapPin,{className:\"w-5 h-5 text-gray-600\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"p-2 hover:bg-neutral-100 rounded-full transition-colors\",title:\"\\u53D1\\u9001\\u6587\\u4EF6\",children:/*#__PURE__*/_jsx(Paperclip,{className:\"w-5 h-5 text-gray-600\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 relative\",children:/*#__PURE__*/_jsx(\"textarea\",{value:message,onChange:e=>setMessage(e.target.value),onKeyPress:handleKeyPress,placeholder:\"\\u8F93\\u5165\\u6D88\\u606F...\",className:\"w-full px-4 py-2 pr-12 border border-neutral-200 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-primary-500\",rows:1,style:{minHeight:'40px',maxHeight:'120px'}})}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSendMessage,disabled:!message.trim()||isLoading,className:cn(\"p-2 rounded-full transition-colors\",message.trim()&&!isLoading?\"bg-primary-500 hover:bg-primary-600 text-white\":\"bg-neutral-200 text-neutral-400 cursor-not-allowed\"),children:/*#__PURE__*/_jsx(Send,{className:\"w-5 h-5\"})})]})]})]});};export default ChatWindow;","map":{"version":3,"names":["React","useState","useRef","useEffect","motion","AnimatePresence","Send","Paperclip","Image","MapPin","Phone","Video","X","MoreVertical","AlertCircle","useChat","useAuth","cn","formatDistanceToNow","zhCN","jsx","_jsx","jsxs","_jsxs","ChatWindow","_ref","orderId","receiverInfo","onClose","className","message","setMessage","isTyping","setIsTyping","messagesEndRef","fileInputRef","user","messages","sendMessage","isLoading","error","setCurrentChat","userId","id","userName","name","_messagesEndRef$curre","current","scrollIntoView","behavior","handleSendMessage","trim","console","handleFileUpload","file","log","handleKeyPress","e","key","shiftKey","preventDefault","formatMessageTime","date","Date","addSuffix","locale","isCurrentUser","senderId","renderMessageContent","type","children","src","alt","onClick","window","open","div","initial","opacity","y","animate","exit","avatar","online","map","createdAt","read","ref","accept","onChange","_e$target$files","target","files","_fileInputRef$current","click","title","value","onKeyPress","placeholder","rows","style","minHeight","maxHeight","disabled"],"sources":["D:/project/trade/frontend/src/components/ChatWindow.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { \n  Send, \n  Paperclip, \n  Image, \n  MapPin, \n  Phone, \n  Video, \n  X, \n  MoreVertical,\n  AlertCircle\n} from 'lucide-react';\nimport { useChat } from '../hooks/useChat';\nimport { useAuth } from '../hooks/useAuth';\nimport { cn } from '../utils/cn';\nimport { formatDistanceToNow } from 'date-fns';\nimport { zhCN } from 'date-fns/locale';\n\n/**\n * 聊天窗口组件\n * 提供实时聊天功能，包括消息发送、接收、文件分享等\n */\ninterface ChatWindowProps {\n  orderId: string;\n  receiverInfo: {\n    id: string;\n    name: string;\n    avatar: string;\n    online?: boolean;\n  };\n  onClose?: () => void;\n  className?: string;\n}\n\nconst ChatWindow: React.FC<ChatWindowProps> = ({\n  orderId,\n  receiverInfo,\n  onClose,\n  className\n}) => {\n  const [message, setMessage] = useState('');\n  const [isTyping, setIsTyping] = useState(false);\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  \n  const { user } = useAuth();\n  const {\n    messages,\n    sendMessage,\n    isLoading,\n    error,\n    setCurrentChat,\n  } = useChat();\n\n  // 设置当前聊天\n  useEffect(() => {\n    setCurrentChat({\n      orderId,\n      userId: receiverInfo.id,\n      userName: receiverInfo.name,\n    });\n\n    return () => {\n      setCurrentChat(null);\n    };\n  }, [orderId, receiverInfo.id, receiverInfo.name, setCurrentChat]);\n\n  // 自动滚动到底部\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [messages]);\n\n  // 处理发送消息\n  const handleSendMessage = async () => {\n    if (!message.trim() || isLoading) return;\n\n    try {\n      await sendMessage(message.trim());\n      setMessage('');\n    } catch (error) {\n      console.error('发送消息失败:', error);\n    }\n  };\n\n  // 处理文件上传\n  const handleFileUpload = async (file: File) => {\n    // 这里可以集成文件上传功能\n    console.log('上传文件:', file.name);\n    // 实际实现会调用fileService.uploadFile()\n  };\n\n  // 处理键盘事件\n  const handleKeyPress = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSendMessage();\n    }\n  };\n\n  // 格式化消息时间\n  const formatMessageTime = (date: string) => {\n    return formatDistanceToNow(new Date(date), { \n      addSuffix: true, \n      locale: zhCN \n    });\n  };\n\n  // 判断消息是否来自当前用户\n  const isCurrentUser = (senderId: string) => {\n    return senderId === user?.id;\n  };\n\n  // 渲染消息内容\n  const renderMessageContent = (message: any) => {\n    switch (message.type) {\n      case 'text':\n        return (\n          <div className=\"whitespace-pre-wrap break-words\">\n            {message.message}\n          </div>\n        );\n      case 'image':\n        return (\n          <img \n            src={message.message} \n            alt=\"分享的图片\"\n            className=\"max-w-xs rounded-lg cursor-pointer hover:opacity-90\"\n            onClick={() => window.open(message.message, '_blank')}\n          />\n        );\n      case 'location':\n        return (\n          <div className=\"flex items-center gap-2 p-2 bg-blue-50 rounded-lg\">\n            <MapPin className=\"w-4 h-4 text-blue-600\" />\n            <span className=\"text-sm text-blue-800\">{message.message}</span>\n          </div>\n        );\n      default:\n        return (\n          <div className=\"whitespace-pre-wrap break-words\">\n            {message.message}\n          </div>\n        );\n    }\n  };\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      exit={{ opacity: 0, y: 20 }}\n      className={cn(\n        \"bg-white rounded-lg shadow-xl flex flex-col h-full\",\n        className\n      )}\n    >\n      {/* 聊天头部 */}\n      <div className=\"flex items-center justify-between p-4 border-b border-neutral-200\">\n        <div className=\"flex items-center gap-3\">\n          <div className=\"relative\">\n            <img\n              src={receiverInfo.avatar}\n              alt={receiverInfo.name}\n              className=\"w-10 h-10 rounded-full object-cover\"\n            />\n            {receiverInfo.online && (\n              <div className=\"absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-white\"></div>\n            )}\n          </div>\n          <div>\n            <h3 className=\"font-semibold text-gray-900\">{receiverInfo.name}</h3>\n            <p className=\"text-sm text-gray-500\">\n              {receiverInfo.online ? '在线' : '离线'}\n            </p>\n          </div>\n        </div>\n        \n        <div className=\"flex items-center gap-2\">\n          <button className=\"p-2 hover:bg-neutral-100 rounded-full transition-colors\">\n            <Phone className=\"w-5 h-5 text-gray-600\" />\n          </button>\n          <button className=\"p-2 hover:bg-neutral-100 rounded-full transition-colors\">\n            <Video className=\"w-5 h-5 text-gray-600\" />\n          </button>\n          <button className=\"p-2 hover:bg-neutral-100 rounded-full transition-colors\">\n            <MoreVertical className=\"w-5 h-5 text-gray-600\" />\n          </button>\n          {onClose && (\n            <button\n              onClick={onClose}\n              className=\"p-2 hover:bg-neutral-100 rounded-full transition-colors\"\n            >\n              <X className=\"w-5 h-5 text-gray-600\" />\n            </button>\n          )}\n        </div>\n      </div>\n\n      {/* 消息列表 */}\n      <div className=\"flex-1 overflow-y-auto p-4 space-y-4\">\n        {error && (\n          <div className=\"flex items-center gap-2 p-3 bg-red-50 text-red-600 rounded-lg\">\n            <AlertCircle className=\"w-4 h-4\" />\n            <span className=\"text-sm\">加载消息失败，请重试</span>\n          </div>\n        )}\n\n        <AnimatePresence>\n          {messages.map((message) => (\n            <motion.div\n              key={message.id}\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              exit={{ opacity: 0, y: -20 }}\n              className={cn(\n                \"flex gap-3\",\n                isCurrentUser(message.senderId) ? \"justify-end\" : \"justify-start\"\n              )}\n            >\n              {!isCurrentUser(message.senderId) && (\n                <img\n                  src={receiverInfo.avatar}\n                  alt={receiverInfo.name}\n                  className=\"w-8 h-8 rounded-full object-cover flex-shrink-0\"\n                />\n              )}\n              \n              <div className={cn(\n                \"max-w-xs lg:max-w-md\",\n                isCurrentUser(message.senderId) ? \"order-first\" : \"order-last\"\n              )}>\n                <div className={cn(\n                  \"rounded-lg px-4 py-2\",\n                  isCurrentUser(message.senderId)\n                    ? \"bg-primary-500 text-white\"\n                    : \"bg-neutral-100 text-gray-900\"\n                )}>\n                  {renderMessageContent(message)}\n                </div>\n                <div className={cn(\n                  \"text-xs text-gray-500 mt-1\",\n                  isCurrentUser(message.senderId) ? \"text-right\" : \"text-left\"\n                )}>\n                  {formatMessageTime(message.createdAt)}\n                  {!message.read && isCurrentUser(message.senderId) && (\n                    <span className=\"ml-2 text-primary-600\">已送达</span>\n                  )}\n                </div>\n              </div>\n\n              {isCurrentUser(message.senderId) && (\n                <div className=\"w-8 h-8 flex-shrink-0\"></div>\n              )}\n            </motion.div>\n          ))}\n        </AnimatePresence>\n        \n        <div ref={messagesEndRef} />\n      </div>\n\n      {/* 输入区域 */}\n      <div className=\"p-4 border-t border-neutral-200\">\n        {isTyping && (\n          <div className=\"text-sm text-gray-500 mb-2\">\n            {receiverInfo.name} 正在输入...\n          </div>\n        )}\n        \n        <div className=\"flex items-center gap-2\">\n          <input\n            ref={fileInputRef}\n            type=\"file\"\n            accept=\"image/*\"\n            className=\"hidden\"\n            onChange={(e) => {\n              const file = e.target.files?.[0];\n              if (file) {\n                handleFileUpload(file);\n              }\n            }}\n          />\n          \n          <button\n            onClick={() => fileInputRef.current?.click()}\n            className=\"p-2 hover:bg-neutral-100 rounded-full transition-colors\"\n            title=\"发送图片\"\n          >\n            <Image className=\"w-5 h-5 text-gray-600\" />\n          </button>\n          \n          <button\n            className=\"p-2 hover:bg-neutral-100 rounded-full transition-colors\"\n            title=\"发送位置\"\n          >\n            <MapPin className=\"w-5 h-5 text-gray-600\" />\n          </button>\n          \n          <button\n            className=\"p-2 hover:bg-neutral-100 rounded-full transition-colors\"\n            title=\"发送文件\"\n          >\n            <Paperclip className=\"w-5 h-5 text-gray-600\" />\n          </button>\n          \n          <div className=\"flex-1 relative\">\n            <textarea\n              value={message}\n              onChange={(e) => setMessage(e.target.value)}\n              onKeyPress={handleKeyPress}\n              placeholder=\"输入消息...\"\n              className=\"w-full px-4 py-2 pr-12 border border-neutral-200 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-primary-500\"\n              rows={1}\n              style={{ minHeight: '40px', maxHeight: '120px' }}\n            />\n          </div>\n          \n          <button\n            onClick={handleSendMessage}\n            disabled={!message.trim() || isLoading}\n            className={cn(\n              \"p-2 rounded-full transition-colors\",\n              message.trim() && !isLoading\n                ? \"bg-primary-500 hover:bg-primary-600 text-white\"\n                : \"bg-neutral-200 text-neutral-400 cursor-not-allowed\"\n            )}\n          >\n            <Send className=\"w-5 h-5\" />\n          </button>\n        </div>\n      </div>\n    </motion.div>\n  );\n};\n\nexport default ChatWindow;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}