{"ast":null,"code":"var _jsxFileName = \"D:\\\\project\\\\trade\\\\frontend\\\\src\\\\components\\\\ChatWindow.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Send, Paperclip, Image, MapPin, Phone, Video, X, MoreVertical, AlertCircle } from 'lucide-react';\nimport { useChat } from '../hooks/useChat';\nimport { useAuth } from '../hooks/useAuth';\nimport { cn } from '../utils/cn';\nimport { formatDistanceToNow } from 'date-fns';\nimport { zhCN } from 'date-fns/locale';\n\n/**\n * 聊天窗口组件\n * 提供实时聊天功能，包括消息发送、接收、文件分享等\n */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ChatWindow = ({\n  orderId,\n  receiverInfo,\n  onClose,\n  className\n}) => {\n  _s();\n  const [message, setMessage] = useState('');\n  const [isTyping, setIsTyping] = useState(false);\n  const messagesEndRef = useRef(null);\n  const fileInputRef = useRef(null);\n  const {\n    user\n  } = useAuth();\n  const {\n    messages,\n    sendMessage,\n    isLoading,\n    error,\n    setCurrentChat\n  } = useChat();\n\n  // 设置当前聊天\n  useEffect(() => {\n    setCurrentChat({\n      orderId,\n      userId: receiverInfo.id,\n      userName: receiverInfo.name\n    });\n    return () => {\n      setCurrentChat(null);\n    };\n  }, [orderId, receiverInfo.id, receiverInfo.name, setCurrentChat]);\n\n  // 自动滚动到底部\n  useEffect(() => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n  }, [messages]);\n\n  // 处理发送消息\n  const handleSendMessage = async () => {\n    if (!message.trim() || isLoading) return;\n    try {\n      await sendMessage(message.trim());\n      setMessage('');\n    } catch (error) {\n      console.error('发送消息失败:', error);\n    }\n  };\n\n  // 处理文件上传\n  const handleFileUpload = async file => {\n    // 这里可以集成文件上传功能\n    console.log('上传文件:', file.name);\n    // 实际实现会调用fileService.uploadFile()\n  };\n\n  // 处理键盘事件\n  const handleKeyPress = e => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSendMessage();\n    }\n  };\n\n  // 格式化消息时间\n  const formatMessageTime = date => {\n    return formatDistanceToNow(new Date(date), {\n      addSuffix: true,\n      locale: zhCN\n    });\n  };\n\n  // 判断消息是否来自当前用户\n  const isCurrentUser = senderId => {\n    return senderId === (user === null || user === void 0 ? void 0 : user.id);\n  };\n\n  // 渲染消息内容\n  const renderMessageContent = message => {\n    switch (message.type) {\n      case 'text':\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"whitespace-pre-wrap break-words\",\n          children: message.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 11\n        }, this);\n      case 'image':\n        return /*#__PURE__*/_jsxDEV(\"img\", {\n          src: message.message,\n          alt: \"\\u5206\\u4EAB\\u7684\\u56FE\\u7247\",\n          className: \"max-w-xs rounded-lg cursor-pointer hover:opacity-90\",\n          onClick: () => window.open(message.message, '_blank')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 11\n        }, this);\n      case 'location':\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-2 p-2 bg-blue-50 rounded-lg\",\n          children: [/*#__PURE__*/_jsxDEV(MapPin, {\n            className: \"w-4 h-4 text-blue-600\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-sm text-blue-800\",\n            children: message.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 11\n        }, this);\n      default:\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"whitespace-pre-wrap break-words\",\n          children: message.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 11\n        }, this);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(motion.div, {\n    initial: {\n      opacity: 0,\n      y: 20\n    },\n    animate: {\n      opacity: 1,\n      y: 0\n    },\n    exit: {\n      opacity: 0,\n      y: 20\n    },\n    className: cn(\"bg-white rounded-lg shadow-xl flex flex-col h-full\", className),\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-between p-4 border-b border-neutral-200\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: receiverInfo.avatar,\n            alt: receiverInfo.name,\n            className: \"w-10 h-10 rounded-full object-cover\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 13\n          }, this), receiverInfo.online && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-white\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"font-semibold text-gray-900\",\n            children: receiverInfo.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-gray-500\",\n            children: receiverInfo.online ? '在线' : '离线'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"p-2 hover:bg-neutral-100 rounded-full transition-colors\",\n          children: /*#__PURE__*/_jsxDEV(Phone, {\n            className: \"w-5 h-5 text-gray-600\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"p-2 hover:bg-neutral-100 rounded-full transition-colors\",\n          children: /*#__PURE__*/_jsxDEV(Video, {\n            className: \"w-5 h-5 text-gray-600\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"p-2 hover:bg-neutral-100 rounded-full transition-colors\",\n          children: /*#__PURE__*/_jsxDEV(MoreVertical, {\n            className: \"w-5 h-5 text-gray-600\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 11\n        }, this), onClose && /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onClose,\n          className: \"p-2 hover:bg-neutral-100 rounded-full transition-colors\",\n          children: /*#__PURE__*/_jsxDEV(X, {\n            className: \"w-5 h-5 text-gray-600\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 overflow-y-auto p-4 space-y-4\",\n      children: [error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-2 p-3 bg-red-50 text-red-600 rounded-lg\",\n        children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n          className: \"w-4 h-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-sm\",\n          children: \"\\u52A0\\u8F7D\\u6D88\\u606F\\u5931\\u8D25\\uFF0C\\u8BF7\\u91CD\\u8BD5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(AnimatePresence, {\n        children: messages.map(message => /*#__PURE__*/_jsxDEV(motion.div, {\n          initial: {\n            opacity: 0,\n            y: 20\n          },\n          animate: {\n            opacity: 1,\n            y: 0\n          },\n          exit: {\n            opacity: 0,\n            y: -20\n          },\n          className: cn(\"flex gap-3\", isCurrentUser(message.senderId) ? \"justify-end\" : \"justify-start\"),\n          children: [!isCurrentUser(message.senderId) && /*#__PURE__*/_jsxDEV(\"img\", {\n            src: receiverInfo.avatar,\n            alt: receiverInfo.name,\n            className: \"w-8 h-8 rounded-full object-cover flex-shrink-0\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: cn(\"max-w-xs lg:max-w-md\", isCurrentUser(message.senderId) ? \"order-first\" : \"order-last\"),\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: cn(\"rounded-lg px-4 py-2\", isCurrentUser(message.senderId) ? \"bg-primary-500 text-white\" : \"bg-neutral-100 text-gray-900\"),\n              children: renderMessageContent(message)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 233,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: cn(\"text-xs text-gray-500 mt-1\", isCurrentUser(message.senderId) ? \"text-right\" : \"text-left\"),\n              children: [formatMessageTime(message.createdAt), !message.read && isCurrentUser(message.senderId) && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"ml-2 text-primary-600\",\n                children: \"\\u5DF2\\u9001\\u8FBE\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 247,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 241,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 15\n          }, this), isCurrentUser(message.senderId) && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-8 h-8 flex-shrink-0\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 253,\n            columnNumber: 17\n          }, this)]\n        }, message.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: messagesEndRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-4 border-t border-neutral-200\",\n      children: [isTyping && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-sm text-gray-500 mb-2\",\n        children: [receiverInfo.name, \" \\u6B63\\u5728\\u8F93\\u5165...\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          ref: fileInputRef,\n          type: \"file\",\n          accept: \"image/*\",\n          className: \"hidden\",\n          onChange: e => {\n            var _e$target$files;\n            const file = (_e$target$files = e.target.files) === null || _e$target$files === void 0 ? void 0 : _e$target$files[0];\n            if (file) {\n              handleFileUpload(file);\n            }\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            var _fileInputRef$current;\n            return (_fileInputRef$current = fileInputRef.current) === null || _fileInputRef$current === void 0 ? void 0 : _fileInputRef$current.click();\n          },\n          className: \"p-2 hover:bg-neutral-100 rounded-full transition-colors\",\n          title: \"\\u53D1\\u9001\\u56FE\\u7247\",\n          children: /*#__PURE__*/_jsxDEV(Image, {\n            className: \"w-5 h-5 text-gray-600\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 289,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"p-2 hover:bg-neutral-100 rounded-full transition-colors\",\n          title: \"\\u53D1\\u9001\\u4F4D\\u7F6E\",\n          children: /*#__PURE__*/_jsxDEV(MapPin, {\n            className: \"w-5 h-5 text-gray-600\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 296,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"p-2 hover:bg-neutral-100 rounded-full transition-colors\",\n          title: \"\\u53D1\\u9001\\u6587\\u4EF6\",\n          children: /*#__PURE__*/_jsxDEV(Paperclip, {\n            className: \"w-5 h-5 text-gray-600\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 303,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-1 relative\",\n          children: /*#__PURE__*/_jsxDEV(\"textarea\", {\n            value: message,\n            onChange: e => setMessage(e.target.value),\n            onKeyPress: handleKeyPress,\n            placeholder: \"\\u8F93\\u5165\\u6D88\\u606F...\",\n            className: \"w-full px-4 py-2 pr-12 border border-neutral-200 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-primary-500\",\n            rows: 1,\n            style: {\n              minHeight: '40px',\n              maxHeight: '120px'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 307,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 306,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleSendMessage,\n          disabled: !message.trim() || isLoading,\n          className: cn(\"p-2 rounded-full transition-colors\", message.trim() && !isLoading ? \"bg-primary-500 hover:bg-primary-600 text-white\" : \"bg-neutral-200 text-neutral-400 cursor-not-allowed\"),\n          children: /*#__PURE__*/_jsxDEV(Send, {\n            className: \"w-5 h-5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 328,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 318,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 149,\n    columnNumber: 5\n  }, this);\n};\n_s(ChatWindow, \"+XpdSa3wShHZffPy7jKoFEMLCaQ=\", false, function () {\n  return [useAuth, useChat];\n});\n_c = ChatWindow;\nexport default ChatWindow;\nvar _c;\n$RefreshReg$(_c, \"ChatWindow\");","map":{"version":3,"names":["React","useState","useRef","useEffect","motion","AnimatePresence","Send","Paperclip","Image","MapPin","Phone","Video","X","MoreVertical","AlertCircle","useChat","useAuth","cn","formatDistanceToNow","zhCN","jsxDEV","_jsxDEV","ChatWindow","orderId","receiverInfo","onClose","className","_s","message","setMessage","isTyping","setIsTyping","messagesEndRef","fileInputRef","user","messages","sendMessage","isLoading","error","setCurrentChat","userId","id","userName","name","_messagesEndRef$curre","current","scrollIntoView","behavior","handleSendMessage","trim","console","handleFileUpload","file","log","handleKeyPress","e","key","shiftKey","preventDefault","formatMessageTime","date","Date","addSuffix","locale","isCurrentUser","senderId","renderMessageContent","type","children","fileName","_jsxFileName","lineNumber","columnNumber","src","alt","onClick","window","open","div","initial","opacity","y","animate","exit","avatar","online","map","createdAt","read","ref","accept","onChange","_e$target$files","target","files","_fileInputRef$current","click","title","value","onKeyPress","placeholder","rows","style","minHeight","maxHeight","disabled","_c","$RefreshReg$"],"sources":["D:/project/trade/frontend/src/components/ChatWindow.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { \n  Send, \n  Paperclip, \n  Image, \n  MapPin, \n  Phone, \n  Video, \n  X, \n  MoreVertical,\n  AlertCircle\n} from 'lucide-react';\nimport { useChat } from '../hooks/useChat';\nimport { useAuth } from '../hooks/useAuth';\nimport { cn } from '../utils/cn';\nimport { formatDistanceToNow } from 'date-fns';\nimport { zhCN } from 'date-fns/locale';\n\n/**\n * 聊天窗口组件\n * 提供实时聊天功能，包括消息发送、接收、文件分享等\n */\ninterface ChatWindowProps {\n  orderId: string;\n  receiverInfo: {\n    id: string;\n    name: string;\n    avatar: string;\n    online?: boolean;\n  };\n  onClose?: () => void;\n  className?: string;\n}\n\nconst ChatWindow: React.FC<ChatWindowProps> = ({\n  orderId,\n  receiverInfo,\n  onClose,\n  className\n}) => {\n  const [message, setMessage] = useState('');\n  const [isTyping, setIsTyping] = useState(false);\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  \n  const { user } = useAuth();\n  const {\n    messages,\n    sendMessage,\n    isLoading,\n    error,\n    setCurrentChat,\n  } = useChat();\n\n  // 设置当前聊天\n  useEffect(() => {\n    setCurrentChat({\n      orderId,\n      userId: receiverInfo.id,\n      userName: receiverInfo.name,\n    });\n\n    return () => {\n      setCurrentChat(null);\n    };\n  }, [orderId, receiverInfo.id, receiverInfo.name, setCurrentChat]);\n\n  // 自动滚动到底部\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [messages]);\n\n  // 处理发送消息\n  const handleSendMessage = async () => {\n    if (!message.trim() || isLoading) return;\n\n    try {\n      await sendMessage(message.trim());\n      setMessage('');\n    } catch (error) {\n      console.error('发送消息失败:', error);\n    }\n  };\n\n  // 处理文件上传\n  const handleFileUpload = async (file: File) => {\n    // 这里可以集成文件上传功能\n    console.log('上传文件:', file.name);\n    // 实际实现会调用fileService.uploadFile()\n  };\n\n  // 处理键盘事件\n  const handleKeyPress = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSendMessage();\n    }\n  };\n\n  // 格式化消息时间\n  const formatMessageTime = (date: string) => {\n    return formatDistanceToNow(new Date(date), { \n      addSuffix: true, \n      locale: zhCN \n    });\n  };\n\n  // 判断消息是否来自当前用户\n  const isCurrentUser = (senderId: string) => {\n    return senderId === user?.id;\n  };\n\n  // 渲染消息内容\n  const renderMessageContent = (message: any) => {\n    switch (message.type) {\n      case 'text':\n        return (\n          <div className=\"whitespace-pre-wrap break-words\">\n            {message.message}\n          </div>\n        );\n      case 'image':\n        return (\n          <img \n            src={message.message} \n            alt=\"分享的图片\"\n            className=\"max-w-xs rounded-lg cursor-pointer hover:opacity-90\"\n            onClick={() => window.open(message.message, '_blank')}\n          />\n        );\n      case 'location':\n        return (\n          <div className=\"flex items-center gap-2 p-2 bg-blue-50 rounded-lg\">\n            <MapPin className=\"w-4 h-4 text-blue-600\" />\n            <span className=\"text-sm text-blue-800\">{message.message}</span>\n          </div>\n        );\n      default:\n        return (\n          <div className=\"whitespace-pre-wrap break-words\">\n            {message.message}\n          </div>\n        );\n    }\n  };\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      exit={{ opacity: 0, y: 20 }}\n      className={cn(\n        \"bg-white rounded-lg shadow-xl flex flex-col h-full\",\n        className\n      )}\n    >\n      {/* 聊天头部 */}\n      <div className=\"flex items-center justify-between p-4 border-b border-neutral-200\">\n        <div className=\"flex items-center gap-3\">\n          <div className=\"relative\">\n            <img\n              src={receiverInfo.avatar}\n              alt={receiverInfo.name}\n              className=\"w-10 h-10 rounded-full object-cover\"\n            />\n            {receiverInfo.online && (\n              <div className=\"absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-white\"></div>\n            )}\n          </div>\n          <div>\n            <h3 className=\"font-semibold text-gray-900\">{receiverInfo.name}</h3>\n            <p className=\"text-sm text-gray-500\">\n              {receiverInfo.online ? '在线' : '离线'}\n            </p>\n          </div>\n        </div>\n        \n        <div className=\"flex items-center gap-2\">\n          <button className=\"p-2 hover:bg-neutral-100 rounded-full transition-colors\">\n            <Phone className=\"w-5 h-5 text-gray-600\" />\n          </button>\n          <button className=\"p-2 hover:bg-neutral-100 rounded-full transition-colors\">\n            <Video className=\"w-5 h-5 text-gray-600\" />\n          </button>\n          <button className=\"p-2 hover:bg-neutral-100 rounded-full transition-colors\">\n            <MoreVertical className=\"w-5 h-5 text-gray-600\" />\n          </button>\n          {onClose && (\n            <button\n              onClick={onClose}\n              className=\"p-2 hover:bg-neutral-100 rounded-full transition-colors\"\n            >\n              <X className=\"w-5 h-5 text-gray-600\" />\n            </button>\n          )}\n        </div>\n      </div>\n\n      {/* 消息列表 */}\n      <div className=\"flex-1 overflow-y-auto p-4 space-y-4\">\n        {error && (\n          <div className=\"flex items-center gap-2 p-3 bg-red-50 text-red-600 rounded-lg\">\n            <AlertCircle className=\"w-4 h-4\" />\n            <span className=\"text-sm\">加载消息失败，请重试</span>\n          </div>\n        )}\n\n        <AnimatePresence>\n          {messages.map((message) => (\n            <motion.div\n              key={message.id}\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              exit={{ opacity: 0, y: -20 }}\n              className={cn(\n                \"flex gap-3\",\n                isCurrentUser(message.senderId) ? \"justify-end\" : \"justify-start\"\n              )}\n            >\n              {!isCurrentUser(message.senderId) && (\n                <img\n                  src={receiverInfo.avatar}\n                  alt={receiverInfo.name}\n                  className=\"w-8 h-8 rounded-full object-cover flex-shrink-0\"\n                />\n              )}\n              \n              <div className={cn(\n                \"max-w-xs lg:max-w-md\",\n                isCurrentUser(message.senderId) ? \"order-first\" : \"order-last\"\n              )}>\n                <div className={cn(\n                  \"rounded-lg px-4 py-2\",\n                  isCurrentUser(message.senderId)\n                    ? \"bg-primary-500 text-white\"\n                    : \"bg-neutral-100 text-gray-900\"\n                )}>\n                  {renderMessageContent(message)}\n                </div>\n                <div className={cn(\n                  \"text-xs text-gray-500 mt-1\",\n                  isCurrentUser(message.senderId) ? \"text-right\" : \"text-left\"\n                )}>\n                  {formatMessageTime(message.createdAt)}\n                  {!message.read && isCurrentUser(message.senderId) && (\n                    <span className=\"ml-2 text-primary-600\">已送达</span>\n                  )}\n                </div>\n              </div>\n\n              {isCurrentUser(message.senderId) && (\n                <div className=\"w-8 h-8 flex-shrink-0\"></div>\n              )}\n            </motion.div>\n          ))}\n        </AnimatePresence>\n        \n        <div ref={messagesEndRef} />\n      </div>\n\n      {/* 输入区域 */}\n      <div className=\"p-4 border-t border-neutral-200\">\n        {isTyping && (\n          <div className=\"text-sm text-gray-500 mb-2\">\n            {receiverInfo.name} 正在输入...\n          </div>\n        )}\n        \n        <div className=\"flex items-center gap-2\">\n          <input\n            ref={fileInputRef}\n            type=\"file\"\n            accept=\"image/*\"\n            className=\"hidden\"\n            onChange={(e) => {\n              const file = e.target.files?.[0];\n              if (file) {\n                handleFileUpload(file);\n              }\n            }}\n          />\n          \n          <button\n            onClick={() => fileInputRef.current?.click()}\n            className=\"p-2 hover:bg-neutral-100 rounded-full transition-colors\"\n            title=\"发送图片\"\n          >\n            <Image className=\"w-5 h-5 text-gray-600\" />\n          </button>\n          \n          <button\n            className=\"p-2 hover:bg-neutral-100 rounded-full transition-colors\"\n            title=\"发送位置\"\n          >\n            <MapPin className=\"w-5 h-5 text-gray-600\" />\n          </button>\n          \n          <button\n            className=\"p-2 hover:bg-neutral-100 rounded-full transition-colors\"\n            title=\"发送文件\"\n          >\n            <Paperclip className=\"w-5 h-5 text-gray-600\" />\n          </button>\n          \n          <div className=\"flex-1 relative\">\n            <textarea\n              value={message}\n              onChange={(e) => setMessage(e.target.value)}\n              onKeyPress={handleKeyPress}\n              placeholder=\"输入消息...\"\n              className=\"w-full px-4 py-2 pr-12 border border-neutral-200 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-primary-500\"\n              rows={1}\n              style={{ minHeight: '40px', maxHeight: '120px' }}\n            />\n          </div>\n          \n          <button\n            onClick={handleSendMessage}\n            disabled={!message.trim() || isLoading}\n            className={cn(\n              \"p-2 rounded-full transition-colors\",\n              message.trim() && !isLoading\n                ? \"bg-primary-500 hover:bg-primary-600 text-white\"\n                : \"bg-neutral-200 text-neutral-400 cursor-not-allowed\"\n            )}\n          >\n            <Send className=\"w-5 h-5\" />\n          </button>\n        </div>\n      </div>\n    </motion.div>\n  );\n};\n\nexport default ChatWindow;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}